(function(){$(function(){return $("#unearth-advanced-search").length?($("#add-condition").on("click",function(){var t,e;return t=$("#search-fields").data("index"),e="/unearth/advanced/"+t+"/field",$.get(e,function(t){return $("#search-fields").append(t).trigger("change")})}),$("#unearth-advanced-search").on("click",".remove-condition",function(){return $(this).parents(".search-condition").fadeOut(300,function(){return $(this).remove(),$("#unearth-advanced-search").trigger("change")})}),$("#unearth-advanced-search").on("change",function(){return $(this).find(".search-condition").length<=0?$(".search-instruction").fadeIn():$(".search-instruction").fadeOut()})):void 0}),$(function(){return $("#unearth-advanced-search").length?$("#unearth-advanced-search").on("keypress",".value input",function(t){return 13===t.which?t.preventDefault():void 0}):void 0}),$(function(){return $("#search-fields").on("change",".field-select select",function(t){var e,i,n,s;return n=$(t.currentTarget).find("option:selected"),e=n.attr("value"),i=$("#search-fields").data("index"),s="/unearth/advanced/"+i+"/field?name="+e,$.get(s,function(e){return $(t.currentTarget).parents(".search-condition").replaceWith(e)})})}),$(function(){return $("#search-fields").on("change",".predicate-select select",function(t){var e,i,n;return e=$(t.currentTarget).find("option:selected"),i=e.attr("value"),n=$(this).parent().parent().children(".value").children("input"),"is_present"===i||"is_blank"===i?(n.val("*"),n.hide()):(n.val(""),n.show())})}),$(function(){return $("#unearth-advanced-results").length>0?$("#unearth-advanced-export").click(function(){var t;return t=$("#unearth-advanced-search").attr("action"),$("#unearth-advanced-search").attr("action",$(this).attr("href")),$("#unearth-advanced-search").submit(),$("#unearth-advanced-search").attr("action",t),!1}):void 0})}).call(this),function(t){"use strict";function e(e){var i=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(this).ajaxSubmit(i))}function i(e){var i=e.target,n=t(i);if(!n.is("[type=submit],[type=image]")){var s=n.closest("[type=submit]");if(0===s.length)return;i=s[0]}var r=this;if(r.clk=i,"image"==i.type)if(void 0!==e.offsetX)r.clk_x=e.offsetX,r.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var a=n.offset();r.clk_x=e.pageX-a.left,r.clk_y=e.pageY-a.top}else r.clk_x=e.pageX-i.offsetLeft,r.clk_y=e.pageY-i.offsetTop;setTimeout(function(){r.clk=r.clk_x=r.clk_y=null},100)}function n(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}var s={};s.fileapi=void 0!==t("<input type='file'/>").get(0).files,s.formdata=void 0!==window.FormData,t.fn.ajaxSubmit=function(e){function i(e){var i,n,s=t.param(e).split("&"),r=s.length,a=[];for(i=0;r>i;i++)s[i]=s[i].replace(/\+/g," "),n=s[i].split("="),a.push([decodeURIComponent(n[0]),decodeURIComponent(n[1])]);return a}function r(n){for(var s=new FormData,r=0;r<n.length;r++)s.append(n[r].name,n[r].value);if(e.extraData){var a=i(e.extraData);for(r=0;r<a.length;r++)a[r]&&s.append(a[r][0],a[r][1])}e.data=null;var h=t.extend(!0,{},t.ajaxSettings,e,{contentType:!1,processData:!1,cache:!1,type:o||"POST"});e.uploadProgress&&(h.xhr=function(){var t=jQuery.ajaxSettings.xhr();return t.upload&&t.upload.addEventListener("progress",function(t){var i=0,n=t.loaded||t.position,s=t.total;t.lengthComputable&&(i=Math.ceil(n/s*100)),e.uploadProgress(t,n,s,i)},!1),t}),h.data=null;var c=h.beforeSend;return h.beforeSend=function(t,e){e.data=s,c&&c.call(this,t,e)},t.ajax(h)}function a(i){function s(t){var e=t.contentWindow?t.contentWindow.document:t.contentDocument?t.contentDocument:t.document;return e}function r(){function e(){try{var t=s(g).readyState;n("state = "+t),t&&"uninitialized"==t.toLowerCase()&&setTimeout(e,50)}catch(i){n("Server abort: ",i," (",i.name,")"),a(x),S&&clearTimeout(S),S=void 0}}var i=l.attr("target"),r=l.attr("action");k.setAttribute("target",p),o||k.setAttribute("method","POST"),r!=u.url&&k.setAttribute("action",u.url),u.skipEncodingOverride||o&&!/post/i.test(o)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(S=setTimeout(function(){w=!0,a(_)},u.timeout));var h=[];try{if(u.extraData)for(var c in u.extraData)u.extraData.hasOwnProperty(c)&&h.push(t.isPlainObject(u.extraData[c])&&u.extraData[c].hasOwnProperty("name")&&u.extraData[c].hasOwnProperty("value")?t('<input type="hidden" name="'+u.extraData[c].name+'">').val(u.extraData[c].value).appendTo(k)[0]:t('<input type="hidden" name="'+c+'">').val(u.extraData[c]).appendTo(k)[0]);u.iframeTarget||(m.appendTo("body"),g.attachEvent?g.attachEvent("onload",a):g.addEventListener("load",a,!1)),setTimeout(e,15);try{k.submit()}catch(d){var f=document.createElement("form").submit;f.apply(k)}}finally{k.setAttribute("action",r),i?k.setAttribute("target",i):l.removeAttr("target"),t(h).remove()}}function a(e){if(!v.aborted&&!P){try{A=s(g)}catch(i){n("cannot access response document: ",i),e=x}if(e===_&&v)return v.abort("timeout"),void D.reject(v,"timeout");if(e==x&&v)return v.abort("server abort"),void D.reject(v,"error","server abort");if(A&&A.location.href!=u.iframeSrc||w){g.detachEvent?g.detachEvent("onload",a):g.removeEventListener("load",a,!1);var r,o="success";try{if(w)throw"timeout";var h="xml"==u.dataType||A.XMLDocument||t.isXMLDoc(A);if(n("isXml="+h),!h&&window.opera&&(null===A.body||!A.body.innerHTML)&&--N)return n("requeing onLoad callback, DOM not available"),void setTimeout(a,250);var c=A.body?A.body:A.documentElement;v.responseText=c?c.innerHTML:null,v.responseXML=A.XMLDocument?A.XMLDocument:A,h&&(u.dataType="xml"),v.getResponseHeader=function(t){var e={"content-type":u.dataType};return e[t]},c&&(v.status=Number(c.getAttribute("status"))||v.status,v.statusText=c.getAttribute("statusText")||v.statusText);var l=(u.dataType||"").toLowerCase(),p=/(json|script|text)/.test(l);if(p||u.textarea){var f=A.getElementsByTagName("textarea")[0];if(f)v.responseText=f.value,v.status=Number(f.getAttribute("status"))||v.status,v.statusText=f.getAttribute("statusText")||v.statusText;else if(p){var y=A.getElementsByTagName("pre")[0],b=A.getElementsByTagName("body")[0];y?v.responseText=y.textContent?y.textContent:y.innerText:b&&(v.responseText=b.textContent?b.textContent:b.innerText)}}else"xml"==l&&!v.responseXML&&v.responseText&&(v.responseXML=O(v.responseText));try{E=I(v,l,u)}catch(k){o="parsererror",v.error=r=k||o}}catch(k){n("error caught: ",k),o="error",v.error=r=k||o}v.aborted&&(n("upload aborted"),o=null),v.status&&(o=v.status>=200&&v.status<300||304===v.status?"success":"error"),"success"===o?(u.success&&u.success.call(u.context,E,"success",v),D.resolve(v.responseText,"success",v),d&&t.event.trigger("ajaxSuccess",[v,u])):o&&(void 0===r&&(r=v.statusText),u.error&&u.error.call(u.context,v,o,r),D.reject(v,"error",r),d&&t.event.trigger("ajaxError",[v,u,r])),d&&t.event.trigger("ajaxComplete",[v,u]),d&&!--t.active&&t.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,v,o),P=!0,u.timeout&&clearTimeout(S),setTimeout(function(){u.iframeTarget||m.remove(),v.responseXML=null},100)}}}var h,c,u,d,p,m,g,v,y,b,w,S,k=l[0],C=!!t.fn.prop,D=t.Deferred();if(i)for(c=0;c<f.length;c++)h=t(f[c]),C?h.prop("disabled",!1):h.removeAttr("disabled");if(u=t.extend(!0,{},t.ajaxSettings,e),u.context=u.context||u,p="jqFormIO"+(new Date).getTime(),u.iframeTarget?(m=t(u.iframeTarget),b=m.attr("name"),b?p=b:m.attr("name",p)):(m=t('<iframe name="'+p+'" src="'+u.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=m[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var i="timeout"===e?"timeout":"aborted";n("aborting upload... "+i),this.aborted=1;try{g.contentWindow.document.execCommand&&g.contentWindow.document.execCommand("Stop")}catch(s){}m.attr("src",u.iframeSrc),v.error=i,u.error&&u.error.call(u.context,v,i,e),d&&t.event.trigger("ajaxError",[v,u,i]),u.complete&&u.complete.call(u.context,v,i)}},d=u.global,d&&0===t.active++&&t.event.trigger("ajaxStart"),d&&t.event.trigger("ajaxSend",[v,u]),u.beforeSend&&u.beforeSend.call(u.context,v,u)===!1)return u.global&&t.active--,D.reject(),D;if(v.aborted)return D.reject(),D;y=k.clk,y&&(b=y.name,b&&!y.disabled&&(u.extraData=u.extraData||{},u.extraData[b]=y.value,"image"==y.type&&(u.extraData[b+".x"]=k.clk_x,u.extraData[b+".y"]=k.clk_y)));var _=1,x=2,T=t("meta[name=csrf-token]").attr("content"),M=t("meta[name=csrf-param]").attr("content");M&&T&&(u.extraData=u.extraData||{},u.extraData[M]=T),u.forceSync?r():setTimeout(r,10);var E,A,P,N=50,O=t.parseXML||function(t,e){return window.ActiveXObject?(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},j=t.parseJSON||function(t){return window.eval("("+t+")")},I=function(e,i,n){var s=e.getResponseHeader("content-type")||"",r="xml"===i||!i&&s.indexOf("xml")>=0,a=r?e.responseXML:e.responseText;return r&&"parsererror"===a.documentElement.nodeName&&t.error&&t.error("parsererror"),n&&n.dataFilter&&(a=n.dataFilter(a,i)),"string"==typeof a&&("json"===i||!i&&s.indexOf("json")>=0?a=j(a):("script"===i||!i&&s.indexOf("javascript")>=0)&&t.globalEval(a)),a};return D}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var o,h,c,l=this;"function"==typeof e&&(e={success:e}),o=this.attr("method"),h=this.attr("action"),c="string"==typeof h?t.trim(h):"",c=c||window.location.href||"",c&&(c=(c.match(/^([^#]+)/)||[])[1]),e=t.extend(!0,{url:c,success:t.ajaxSettings.success,type:o||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},e);var u={};if(this.trigger("form-pre-serialize",[this,e,u]),u.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(e.beforeSerialize&&e.beforeSerialize(this,e)===!1)return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=e.traditional;void 0===d&&(d=t.ajaxSettings.traditional);var p,f=[],m=this.formToArray(e.semantic,f);if(e.data&&(e.extraData=e.data,p=t.param(e.data,d)),e.beforeSubmit&&e.beforeSubmit(m,this,e)===!1)return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[m,this,e,u]),u.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var g=t.param(m,d);p&&(g=g?g+"&"+p:p),"GET"==e.type.toUpperCase()?(e.url+=(e.url.indexOf("?")>=0?"&":"?")+g,e.data=null):e.data=g;var v=[];if(e.resetForm&&v.push(function(){l.resetForm()}),e.clearForm&&v.push(function(){l.clearForm(e.includeHidden)}),!e.dataType&&e.target){var y=e.success||function(){};v.push(function(i){var n=e.replaceTarget?"replaceWith":"html";t(e.target)[n](i).each(y,arguments)})}else e.success&&v.push(e.success);e.success=function(t,i,n){for(var s=e.context||this,r=0,a=v.length;a>r;r++)v[r].apply(s,[t,i,n||l,l])};var b=t('input[type=file]:enabled[value!=""]',this),w=b.length>0,S="multipart/form-data",k=l.attr("enctype")==S||l.attr("encoding")==S,C=s.fileapi&&s.formdata;n("fileAPI :"+C);var D,_=(w||k)&&!C;e.iframe!==!1&&(e.iframe||_)?e.closeKeepAlive?t.get(e.closeKeepAlive,function(){D=a(m)}):D=a(m):D=(w||k)&&C?r(m):t.ajax(e),l.removeData("jqxhr").data("jqxhr",D);for(var x=0;x<f.length;x++)f[x]=null;return this.trigger("form-submit-notify",[this,e]),this},t.fn.ajaxForm=function(s){if(s=s||{},s.delegation=s.delegation&&t.isFunction(t.fn.on),!s.delegation&&0===this.length){var r={s:this.selector,c:this.context};return!t.isReady&&r.s?(n("DOM not ready, queuing ajaxForm"),t(function(){t(r.s,r.c).ajaxForm(s)}),this):(n("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return s.delegation?(t(document).off("submit.form-plugin",this.selector,e).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,s,e).on("click.form-plugin",this.selector,s,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",s,e).bind("click.form-plugin",s,i)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(e,i){var n=[];if(0===this.length)return n;var r=this[0],a=e?r.getElementsByTagName("*"):r.elements;if(!a)return n;var o,h,c,l,u,d,p;for(o=0,d=a.length;d>o;o++)if(u=a[o],c=u.name)if(e&&r.clk&&"image"==u.type)u.disabled||r.clk!=u||(n.push({name:c,value:t(u).val(),type:u.type}),n.push({name:c+".x",value:r.clk_x},{name:c+".y",value:r.clk_y}));else if(l=t.fieldValue(u,!0),l&&l.constructor==Array)for(i&&i.push(u),h=0,p=l.length;p>h;h++)n.push({name:c,value:l[h]});else if(s.fileapi&&"file"==u.type&&!u.disabled){i&&i.push(u);var f=u.files;if(f.length)for(h=0;h<f.length;h++)n.push({name:c,value:f[h],type:u.type});else n.push({name:c,value:"",type:u.type})}else null!==l&&"undefined"!=typeof l&&(i&&i.push(u),n.push({name:c,value:l,type:u.type,required:u.required}));if(!e&&r.clk){var m=t(r.clk),g=m[0];c=g.name,c&&!g.disabled&&"image"==g.type&&(n.push({name:c,value:m.val()}),n.push({name:c+".x",value:r.clk_x},{name:c+".y",value:r.clk_y}))}return n},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var i=[];return this.each(function(){var n=this.name;if(n){var s=t.fieldValue(this,e);if(s&&s.constructor==Array)for(var r=0,a=s.length;a>r;r++)i.push({name:n,value:s[r]});else null!==s&&"undefined"!=typeof s&&i.push({name:this.name,value:s})}}),t.param(i)},t.fn.fieldValue=function(e){for(var i=[],n=0,s=this.length;s>n;n++){var r=this[n],a=t.fieldValue(r,e);null===a||"undefined"==typeof a||a.constructor==Array&&!a.length||(a.constructor==Array?t.merge(i,a):i.push(a))}return i},t.fieldValue=function(e,i){var n=e.name,s=e.type,r=e.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||e.disabled||"reset"==s||"button"==s||("checkbox"==s||"radio"==s)&&!e.checked||("submit"==s||"image"==s)&&e.form&&e.form.clk!=e||"select"==r&&-1==e.selectedIndex))return null;if("select"==r){var a=e.selectedIndex;if(0>a)return null;for(var o=[],h=e.options,c="select-one"==s,l=c?a+1:h.length,u=c?a:0;l>u;u++){var d=h[u];if(d.selected){var p=d.value;if(p||(p=d.attributes&&d.attributes.value&&!d.attributes.value.specified?d.text:d.value),c)return p;o.push(p)}}return o}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,s=this.tagName.toLowerCase();i.test(n)||"textarea"==s?this.value="":"checkbox"==n||"radio"==n?this.checked=!1:"select"==s?this.selectedIndex=-1:"file"==n?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone()):t(this).val(""):e&&(e===!0&&/hidden/.test(n)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=e;else if("option"==this.tagName.toLowerCase()){var n=t(this).parent("select");e&&n[0]&&"select-one"==n[0].type&&n.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1}(jQuery),/**
 * Timeago is a jQuery plugin that makes it easy to support automatically
 * updating fuzzy timestamps (e.g. "4 minutes ago" or "about 1 day ago").
 *
 * @name timeago
 * @version 1.1.0
 * @requires jQuery v1.2.3+
 * @author Ryan McGeary
 * @license MIT License - http://www.opensource.org/licenses/mit-license.php
 *
 * For usage and examples, visit:
 * http://timeago.yarp.com/
 *
 * Copyright (c) 2008-2013, Ryan McGeary (ryan -[at]- mcgeary [*dot*] org)
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(){var e=i(this);return isNaN(e.datetime)||t(this).text(n(e.datetime)),this}function i(e){if(e=t(e),!e.data("timeago")){e.data("timeago",{datetime:r.datetime(e)});var i=t.trim(e.text());!(i.length>0)||r.isTime(e)&&e.attr("title")||e.attr("title",i)}return e.data("timeago")}function n(t){return r.inWords(s(t))}function s(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return n(e instanceof Date?e:"string"==typeof e?t.timeago.parse(e):"number"==typeof e?new Date(e):t.timeago.datetime(e))};var r=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(e){function i(i,s){var r=t.isFunction(i)?i(s,e):i,a=n.numbers&&n.numbers[s]||s;return r.replace(/%d/i,a)}var n=this.settings.strings,s=n.prefixAgo,r=n.suffixAgo;this.settings.allowFuture&&0>e&&(s=n.prefixFromNow,r=n.suffixFromNow);var a=Math.abs(e)/1e3,o=a/60,h=o/60,c=h/24,l=c/365,u=45>a&&i(n.seconds,Math.round(a))||90>a&&i(n.minute,1)||45>o&&i(n.minutes,Math.round(o))||90>o&&i(n.hour,1)||24>h&&i(n.hours,Math.round(h))||42>h&&i(n.day,1)||30>c&&i(n.days,Math.round(c))||45>c&&i(n.month,1)||365>c&&i(n.months,Math.round(c/30))||1.5>l&&i(n.year,1)||i(n.years,Math.round(l)),d=n.wordSeparator||"";return void 0===n.wordSeparator&&(d=" "),t.trim([s,u,r].join(d))},parse:function(e){var i=t.trim(e);return i=i.replace(/\.\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)},datetime:function(e){var i=t(e).attr(r.isTime(e)?"datetime":"title");return r.parse(i)},isTime:function(e){return"time"===t(e).get(0).tagName.toLowerCase()}});var a={init:function(){var i=t.proxy(e,this);i();var n=r.settings;n.refreshMillis>0&&setInterval(i,n.refreshMillis)},update:function(i){t(this).data("timeago",{datetime:r.parse(i)}),e.apply(this)}};t.fn.timeago=function(t,e){var i=t?a[t]:a.init;if(!i)throw new Error("Unknown function name '"+t+"' for timeago");return this.each(function(){i.call(this,e)}),this},document.createElement("abbr"),document.createElement("time")}),function(){$(function(){var t,e,i,n;return $(".select-all").button().click(function(t){return t.preventDefault(),$(this).parents("form").find(":checkbox").attr("checked","checked")}),$(".clear-all").button().click(function(t){return t.preventDefault(),$(this).parents("form").find(":checkbox").removeAttr("checked")}),n=function(){return $("span.status").fadeOut(300,function(){return $(this).remove()})},i=function(t){return $(".extractor-ui .header").append(t),setTimeout(n,1e4)},e=function(){var t;return t='<span class="status alert alert-success">\n  Succesfully submitted.\n  <a href="/unearth/extractions" target="_blank" >Download your extractions here.</a>\n</span>',i(t)},t=function(){var t;return t="<span class='status alert alert-failure'>\n  There was an error submitting your request.\n</span> ",i(t)},$(".extractor-ui form").submit(function(i){var n,s;return i.preventDefault(),n=$(this),n.parents("div.extractor-form").slideUp(),s=n.parents(".extractor-ui"),$("html, body").animate({scrollTop:s.offset().top},500),n.ajaxSubmit({success:e,failure:t})}),$(".extractor-ui a.show").click(function(t){var e;return t.preventDefault(),e=$(this),e.parents(".extractor-ui").find("div.extractor-form").slideToggle(function(){return $("span.glyphicon",e).toggleClass("glyphicon-chevron-up").toggleClass("glyphicon-chevron-down")})})}),$(function(){var t,e,i,n,s,r;return $("#extraction-jobs").length?(n=function(){return function(t){return $.getJSON("/unearth/extractions.json",t)}}(this),t=function(t){return"<a href='/extractions/"+t.id+"."+t.output_format+".zip'\ntarget='_blank' class=\"download-link btn btn-default btn-xs\"\n>Download File</a>"},i=function(){return n(function(t){var i,n,s;for(i=0,s=t.length;s>i;i++)n=t[i],e(n);return r()})},e=function(t){var e;return e="<tr id='job-"+t.id+"'>\n  <td>"+t.output_format.toUpperCase()+" File</td>\n  <td class='status'>"+t.status+"</td>\n  <td class='timeago' title=\""+t.created_at+'">\n    '+t.created_at+'\n  </td>\n  <td class=\'progress-container\'>\n    <div class="progress progress-striped active">\n      <div class=\'progress-bar\' role="progressbar" style="width: 0%"></div>\n    </div>\n  </td>\n</tr>',$("#extraction-jobs tbody").prepend(e),$("#job-"+t.id+" .timeago").timeago(),s(t)},s=function(e){return"job failed"===e.status?$("#job-"+e.id+" .progress").remove():"complete"===e.status?$("#job-"+e.id+" td.progress-container").html(t(e)):e.progress<100&&$("#job-"+e.id+" .progress-bar").css("width",e.progress+"%"),$("#job-"+e.id+" .status").html(e.status)},r=function(){return n(function(t){return $.each(t,function(i,n){var r,a,o;if($("#job-"+n.id).length){for(o=[],r=0,a=t.length;a>r;r++)n=t[r],o.push(s(n));return o}return e(n)})}),setTimeout(r,5e3)},i()):void 0})}.call(this),function(){$(function(){return $(".filter-clear").on("click",function(){return $(".checkbox-filter").each(function(){return $(this).prop("checked",!1)}),$(".filter-bar-list textarea").each(function(){return $(this).val("")}),$(this).parents("form").submit()}),$(".filter-group-list-section .checkbox").each(function(){return $(".filter-list-toggle",$(this).parent()).toggle($("input",$(this)).prop("checked"))}),$(".filter-group-list-section .checkbox").on("click",function(){var t;return t=$(this).parent(),$("input",$(this)).prop("checked")?(0===$(".filter-list-choice input:radio:checked",t).length&&$(".filter-list-choice input:radio",t).first().prop("checked",!0),$(".filter-list-toggle",t).slideDown("fast")):$(".filter-list-toggle",t).slideUp("fast")}),$(".filter-list-example a").click(function(t){var e;return t.preventDefault(),e=$(this).data("example"),void 0!==e?$(".filter-bar-list textarea",$(this).parents(".filter-list-toggle")).val(e):void 0})})}.call(this),function(){$(function(){return $(".datatable").DataTable(),$(".dataTables_filter label").each(function(){var t;return t=$(this).find("input").clone(!0),$(this).html(""),t.appendTo($(this))}),$(".dataTables_filter input").attr("placeholder","Search")}),$(function(){return $(".tabber").length?(""!==location.hash?$('a[href="'+location.hash+'"]').tab("show"):$(".tabber a:first").tab("show"),$(".tabber a").click(function(t){return location.hash=$(this).attr("href").substr(1),$(this).tab("show"),t.preventDefault()})):void 0})}.call(this),function(){$(function(){var t,e,i;return $(".nav").length&&(e=$("body").data("c"),t=$("body").data("a"),i=$(".nav li."+e+"."+t),!i.hasClass("not-active"))?(i.addClass("active"),i.parents("li.dropdown").addClass("active")):void 0})}.call(this),function(){this.set_example=function(t,e){return $(t).val(e).effect("highlight",{},2e3)},$(function(){return $(".example-loader").each(function(){return $(this).on("click",function(){var t,e;return e=$(this).data("update"),t=$(this).data("example"),set_example($("#"+e),t),!1})})})}.call(this),function(){$(function(){return $(".table-snps").length?$(".pubmed-link").tooltip():void 0})}.call(this),function(){$(function(){return $("#drug-actions").affix({offset:{top:200}})}),$(function(){return $(".products").on("click","a.package-picture",function(){return $("#modal-package .modal-package-picture").attr("src",$(this).data("url")),$("#modal-package .package-description").html($(this).data("description")),$("#modal-package .full-image").attr("href",$(this).data("fullurl"))})})}.call(this),function(){var t,e,i,n,s,r,a,o,h,c,l,u,d,p,f,m,g,v,y,b,w,S,k,C,D,_,x,T,M,E,A,P,N,O,j,I,F,L,H,U,$,R,J,z,W,V,Q,Y,q,B,X,G,K,Z,te,ee,ie=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1},ne=function(t,e){function i(){this.constructor=t}for(var n in e)se.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},se={}.hasOwnProperty,re=[].slice,ae=function(t,e){return function(){return t.apply(e,arguments)}};O={},d=10,G=!1,H=null,y=null,P=null,R=null,ee=null,n={BEFORE_CHANGE:"page:before-change",FETCH:"page:fetch",RECEIVE:"page:receive",CHANGE:"page:change",UPDATE:"page:update",LOAD:"page:load",RESTORE:"page:restore",BEFORE_UNLOAD:"page:before-unload",EXPIRE:"page:expire"},C=function(t){var e;return t=new i(t),Q(),u(),null!=H&&H.start(),G&&(e=K(t.absolute))?(D(e),_(t,null,!1)):_(t,B)},K=function(t){var e;return e=O[t],e&&!e.transitionCacheDisabled?e:void 0},w=function(t){return null==t&&(t=!0),G=t},b=function(t){return null==t&&(t=!0),c?t?null!=H?H:H=new r("html"):(null!=H&&H.uninstall(),H=null):void 0},_=function(t,e,i){return null==i&&(i=!0),Z(n.FETCH,{url:t.absolute}),null!=ee&&ee.abort(),ee=new XMLHttpRequest,ee.open("GET",t.withoutHashForIE10compatibility(),!0),ee.setRequestHeader("Accept","text/html, application/xhtml+xml, application/xml"),ee.setRequestHeader("X-XHR-Referer",R),ee.onload=function(){var i;return Z(n.RECEIVE,{url:t.absolute}),(i=L())?(J(t),z(),p.apply(null,k(i)),N(),"function"==typeof e&&e(),Z(n.LOAD)):document.location.href=v()||t.absolute},H&&i&&(ee.onprogress=function(){return function(t){var e;return e=t.lengthComputable?t.loaded/t.total*100:H.value+(100-H.value)/10,H.advanceTo(e)}}(this)),ee.onloadend=function(){return ee=null},ee.onerror=function(){return document.location.href=t.absolute},ee.send()},D=function(t){return null!=ee&&ee.abort(),p(t.title,t.body),U(t),Z(n.RESTORE)},u=function(){var t;return t=new i(y.url),O[t.absolute]={url:t.relative,body:document.body,title:document.title,positionY:window.pageYOffset,positionX:window.pageXOffset,cachedAt:(new Date).getTime(),transitionCacheDisabled:null!=document.querySelector("[data-no-transition-cache]")},m(d)},I=function(t){return null==t&&(t=d),/^[\d]+$/.test(t)?d=parseInt(t):void 0},m=function(t){var e,i,s,r,a,o;for(a=Object.keys(O),e=a.map(function(t){return O[t].cachedAt}).sort(function(t,e){return e-t}),o=[],i=0,r=a.length;r>i;i++)s=a[i],O[s].cachedAt<=e[t]&&(Z(n.EXPIRE,O[s]),o.push(delete O[s]));return o},p=function(e,i,s,r){return Z(n.BEFORE_UNLOAD),document.title=e,document.documentElement.replaceChild(i,document.body),null!=s&&t.update(s),X(),r&&S(),y=window.history.state,null!=H&&H.done(),Z(n.CHANGE),Z(n.UPDATE)},S=function(){var t,e,i,n,s,r,a,o,h,c,l,u;for(u=Array.prototype.slice.call(document.body.querySelectorAll('script:not([data-turbolinks-eval="false"])')),i=0,s=u.length;s>i;i++)if(l=u[i],""===(h=l.type)||"text/javascript"===h){for(e=document.createElement("script"),c=l.attributes,n=0,r=c.length;r>n;n++)t=c[n],e.setAttribute(t.name,t.value);l.hasAttribute("async")||(e.async=!1),e.appendChild(document.createTextNode(l.innerHTML)),o=l.parentNode,a=l.nextSibling,o.removeChild(l),o.insertBefore(e,a)}},Y=function(t){return t.innerHTML=t.innerHTML.replace(/<noscript[\S\s]*?<\/noscript>/gi,""),t},X=function(){var t,e;return t=(e=document.querySelectorAll("input[autofocus], textarea[autofocus]"))[e.length-1],t&&document.activeElement!==t?t.focus():void 0},J=function(t){return(t=new i(t)).absolute!==R?window.history.pushState({turbolinks:!0,url:t.absolute},"",t.absolute):void 0},z=function(){var t,e;return(t=ee.getResponseHeader("X-XHR-Redirected-To"))?(t=new i(t),e=t.hasNoHash()?document.location.hash:"",window.history.replaceState(window.history.state,"",t.href+e)):void 0},v=function(){var t;return null!=(t=ee.getResponseHeader("Location"))&&new i(t).crossOrigin()?t:void 0},Q=function(){return R=document.location.href},V=function(){return window.history.replaceState({turbolinks:!0,url:document.location.href},"",document.location.href)},W=function(){return y=window.history.state},N=function(){var t;return navigator.userAgent.match(/Firefox/)&&!(t=new i).hasNoHash()?(window.history.replaceState(y,"",t.withoutHash()),document.location.hash=t.hash):void 0},U=function(t){return window.scrollTo(t.positionX,t.positionY)},B=function(){return document.location.hash?document.location.href=document.location.href:window.scrollTo(0,0)},f=function(t){var e,i,n;if(null==t||"object"!=typeof t)return t;e=new t.constructor;for(i in t)n=t[i],e[i]=f(n);return e},F=function(t){var e,i;return i=(null!=(e=document.cookie.match(new RegExp(t+"=(\\w+)")))?e[1].toUpperCase():void 0)||"",document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT; path=/",i},Z=function(t,e){var i;return"undefined"!=typeof Prototype&&Event.fire(document,t,e,!0),i=document.createEvent("Events"),e&&(i.data=e),i.initEvent(t,!0,!0),document.dispatchEvent(i)},j=function(t){return!Z(n.BEFORE_CHANGE,{url:t})},L=function(){var t,e,i,n,s,r;return e=function(){var t;return 400<=(t=ee.status)&&600>t},r=function(){var t;return null!=(t=ee.getResponseHeader("Content-Type"))&&t.match(/^(?:text\/html|application\/xhtml\+xml|application\/xml)(?:;|$)/)},n=function(t){var e,i,n,s,r;for(s=t.querySelector("head").childNodes,r=[],e=0,i=s.length;i>e;e++)n=s[e],null!=("function"==typeof n.getAttribute?n.getAttribute("data-turbolinks-track"):void 0)&&r.push(n.getAttribute("src")||n.getAttribute("href"));return r},t=function(t){var e;return P||(P=n(document)),e=n(t),e.length!==P.length||s(e,P).length!==P.length},s=function(t,e){var i,n,s,r,a;for(t.length>e.length&&(s=[e,t],t=s[0],e=s[1]),r=[],i=0,n=t.length;n>i;i++)a=t[i],ie.call(e,a)>=0&&r.push(a);return r},!e()&&r()&&(i=g(ee.responseText),i&&!t(i))?i:void 0},k=function(e){var i;return i=e.querySelector("title"),[null!=i?i.textContent:void 0,Y(e.querySelector("body")),t.get(e).token,"runScripts"]},t={get:function(t){var e;return null==t&&(t=document),{node:e=t.querySelector('meta[name="csrf-token"]'),token:null!=e&&"function"==typeof e.getAttribute?e.getAttribute("content"):void 0}},update:function(t){var e;return e=this.get(),null!=e.token&&null!=t&&e.token!==t?e.node.setAttribute("content",t):void 0}},g=function(t){var e;return e=document.documentElement.cloneNode(),e.innerHTML=t,e.head=e.querySelector("head"),e.body=e.querySelector("body"),e},i=function(){function t(e){return this.original=null!=e?e:document.location.href,this.original.constructor===t?this.original:void this._parse()}return t.prototype.withoutHash=function(){return this.href.replace(this.hash,"").replace("#","")},t.prototype.withoutHashForIE10compatibility=function(){return this.withoutHash()},t.prototype.hasNoHash=function(){return 0===this.hash.length},t.prototype.crossOrigin=function(){return this.origin!==(new t).origin},t.prototype._parse=function(){var t;return(null!=this.link?this.link:this.link=document.createElement("a")).href=this.original,t=this.link,this.href=t.href,this.protocol=t.protocol,this.host=t.host,this.hostname=t.hostname,this.port=t.port,this.pathname=t.pathname,this.search=t.search,this.hash=t.hash,this.origin=[this.protocol,"//",this.hostname].join(""),0!==this.port.length&&(this.origin+=":"+this.port),this.relative=[this.pathname,this.search,this.hash].join(""),this.absolute=this.href},t}(),s=function(t){function e(t){return this.link=t,this.link.constructor===e?this.link:(this.original=this.link.href,this.originalElement=this.link,this.link=this.link.cloneNode(!1),void e.__super__.constructor.apply(this,arguments))}return ne(e,t),e.HTML_EXTENSIONS=["html"],e.allowExtensions=function(){var t,i,n,s;for(i=1<=arguments.length?re.call(arguments,0):[],n=0,s=i.length;s>n;n++)t=i[n],e.HTML_EXTENSIONS.push(t);return e.HTML_EXTENSIONS},e.prototype.shouldIgnore=function(){return this.crossOrigin()||this._anchored()||this._nonHtml()||this._optOut()||this._target()},e.prototype._anchored=function(){return(this.hash.length>0||"#"===this.href.charAt(this.href.length-1))&&this.withoutHash()===(new i).withoutHash()},e.prototype._nonHtml=function(){return this.pathname.match(/\.[a-z]+$/g)&&!this.pathname.match(new RegExp("\\.(?:"+e.HTML_EXTENSIONS.join("|")+")?$","g"))},e.prototype._optOut=function(){var t,e;for(e=this.originalElement;!t&&e!==document;)t=null!=e.getAttribute("data-no-turbolink"),e=e.parentNode;return t},e.prototype._target=function(){return 0!==this.link.target.length},e}(i),e=function(){function t(t){this.event=t,this.event.defaultPrevented||(this._extractLink(),this._validForTurbolinks()&&(j(this.link.absolute)||te(this.link.href),this.event.preventDefault()))}return t.installHandlerLast=function(e){return e.defaultPrevented?void 0:(document.removeEventListener("click",t.handle,!1),document.addEventListener("click",t.handle,!1))},t.handle=function(e){return new t(e)},t.prototype._extractLink=function(){var t;for(t=this.event.target;t.parentNode&&"A"!==t.nodeName;)t=t.parentNode;return"A"===t.nodeName&&0!==t.href.length?this.link=new s(t):void 0},t.prototype._validForTurbolinks=function(){return null!=this.link&&!(this.link.shouldIgnore()||this._nonStandardClick())},t.prototype._nonStandardClick=function(){return this.event.which>1||this.event.metaKey||this.event.ctrlKey||this.event.shiftKey||this.event.altKey},t}(),r=function(){function t(t){this.elementSelector=t,this._trickle=ae(this._trickle,this),this.value=0,this.content="",this.speed=300,this.opacity=.99,this.install()}var e;return e="turbolinks-progress-bar",t.prototype.install=function(){return this.element=document.querySelector(this.elementSelector),this.element.classList.add(e),this.styleElement=document.createElement("style"),document.head.appendChild(this.styleElement),this._updateStyle()},t.prototype.uninstall=function(){return this.element.classList.remove(e),document.head.removeChild(this.styleElement)},t.prototype.start=function(){return this.advanceTo(5)},t.prototype.advanceTo=function(t){var e;if(t>(e=this.value)&&100>=e){if(this.value=t,this._updateStyle(),100===this.value)return this._stopTrickle();if(this.value>0)return this._startTrickle()}},t.prototype.done=function(){return this.value>0?(this.advanceTo(100),this._reset()):void 0},t.prototype._reset=function(){var t;return t=this.opacity,setTimeout(function(t){return function(){return t.opacity=0,t._updateStyle()}}(this),this.speed/2),setTimeout(function(e){return function(){return e.value=0,e.opacity=t,e._withSpeed(0,function(){return e._updateStyle(!0)})}}(this),this.speed)},t.prototype._startTrickle=function(){return this.trickling?void 0:(this.trickling=!0,setTimeout(this._trickle,this.speed))},t.prototype._stopTrickle=function(){return delete this.trickling},t.prototype._trickle=function(){return this.trickling?(this.advanceTo(this.value+Math.random()/2),setTimeout(this._trickle,this.speed)):void 0},t.prototype._withSpeed=function(t,e){var i,n;return i=this.speed,this.speed=t,n=e(),this.speed=i,n},t.prototype._updateStyle=function(t){return null==t&&(t=!1),t&&this._changeContentToForceRepaint(),this.styleElement.textContent=this._createCSSRule()},t.prototype._changeContentToForceRepaint=function(){return this.content=""===this.content?" ":""},t.prototype._createCSSRule=function(){return this.elementSelector+"."+e+"::before {\n  content: '"+this.content+"';\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 2000;\n  background-color: #0076ff;\n  height: 3px;\n  opacity: "+this.opacity+";\n  width: "+this.value+"%;\n  transition: width "+this.speed+"ms ease-out, opacity "+this.speed/2+"ms ease-in;\n  transform: translate3d(0,0,0);\n}"},t}(),l=function(t){return setTimeout(t,500)},M=function(){return document.addEventListener("DOMContentLoaded",function(){return Z(n.CHANGE),Z(n.UPDATE)},!0)},A=function(){return"undefined"!=typeof jQuery?jQuery(document).on("ajaxSuccess",function(t,e){return jQuery.trim(e.responseText)?Z(n.UPDATE):void 0}):void 0},E=function(t){var e,n;return(null!=(n=t.state)?n.turbolinks:void 0)?(e=O[new i(t.state.url).absolute])?(u(),D(e)):te(t.target.location.href):void 0},T=function(){return V(),W(),document.addEventListener("click",e.installHandlerLast,!0),window.addEventListener("hashchange",function(){return V(),W()},!1),l(function(){return window.addEventListener("popstate",E,!1)})},x=void 0!==window.history.state||navigator.userAgent.match(/Firefox\/2[6|7]/),h=window.history&&window.history.pushState&&window.history.replaceState&&x,a=!navigator.userAgent.match(/CriOS\//),q="GET"===($=F("request_method"))||""===$,c=h&&a&&q,o=document.addEventListener&&document.createEvent,o&&(M(),A()),c?(te=C,T()):te=function(t){return document.location.href=t},this.Turbolinks={visit:te,pagesCached:I,enableTransitionCache:w,enableProgressBar:b,allowLinkExtensions:s.allowExtensions,supported:c,EVENTS:f(n)}}.call(this);